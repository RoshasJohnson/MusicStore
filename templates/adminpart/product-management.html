{% extends 'adminpart/base.html' %}

{% block content%}
{% load static %}


<div class='ml-5 mt-5 col-xm-12-lg-3'>
    <div class="border" style="color:black;"><a class="btn btn" href="/adminpanel/add_product/"  role="sumbit"><button type="button" class="btn btn-outline-success">Add Product</button></a></div>

    <table class="table">
    <thead> 
      <tr>
        <th  scope="col" class="border border-primary " style="color:black;">Product Id</th>
        <th  scope="col" class="border border-primary " style="color:black;">Product Name</th>
        <th scope="col" class="border border-primary" style="color:black;">Category</th>
        <th scope="col" class="border border-primary" style="color:black;">description</th>
        <th scope="col" class="border border-primary" style="color:black;">Product_prize</th>
        <th scope="col" class="border border-primary" style="color:black;">Product stock</th>
        {% comment %} <th scope="col" class="border border-primary" style="color:black;">Product Image</th> {% endcomment %}
        <th scope="col" class="border border-primary" style="color:black;">Edit Product </th>
        <th scope="col" class="border border-primary" style="color:black;"> Delete Product</th>

        
      </tr>
    </thead>

    
    {% for i in products  %}
   
    <tbody class="border border-danger">
      <tr>
        <td class="border border-primary" style="color:black;">{{i.id }}</td>
        <td class="border border-primary" style="color:black;">{{i.product_name }}</td>
        <td class="border border-primary" style="color:black;">{{i.category_type}}</td>
        <td class="border border-primary" style="color:black;">{{i.product_description}}</td>
        <td class="border border-primary" style="color:black;">{{i.product_prize}}</td>
        <td class="border border-primary" style="color:black;">{{i.stock}}</td>
        {% comment %} <td class="border border-primary" style="color:black;"> <img class="rounded mx-auto d-block" src='{{ i.product_image.url }}'  alt="..."></td> {% endcomment %}
        <td class="border border-primary" style="color:black;"><a class="btn btn" href="{% url 'update_product' i.id %}" role="sumbit"><button type="button" class="btn btn-outline-warning">Edit</button></a></td>

          
            <a  class=" delete" data-confirm="Are you sure to delete this item?"><td class="border border-primary" style="color:black;"><a class=" delete btn btn" data-confirm="Are you sure to delete this item?" href="{% url 'delete_product' i.id %}" role="sumbit"><button type="button" onclick=alert('Item deleted') class="btn btn-outline-danger">Delete</button></a></a>
          </div></td>
      </tr>
  {% endfor %}
    
    </tbody>
  </table>

  <script>
    var deleteLinks = document.querySelectorAll('.delete');
    for (var i = 0; i < deleteLinks.length; i++) {
      deleteLinks[i].addEventListener('click', function(event) {
          event.preventDefault();

          var choice = confirm(this.getAttribute('data-confirm'));

          if (choice) {
            window.location.href = this.getAttribute('href');
          }
      });
    } 
  </script>
  {{ products }}

  {% if products.has_previous %}
  
  <a href="?page=1">&laquo First </a>
  
  <a href="?page={{ products.previous_page_number}}">Previous </a>
  
  {% endif %}
  {% if products.has_next %}
  
  <a href="?page={{ products.next_page_number}}">Next </a>
  
  <a href="?page={{ products.paginator.num_pages}}">Last &raquo </a>
  </div>

  
  {% endif %}
  {% endblock %}
